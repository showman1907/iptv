<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M3U Kanal D√ºzenleyici</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 1000px;
      margin: 40px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .toolbar {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    input, select, button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background-color: #2980b9;
    }
    .group {
      margin-bottom: 30px;
    }
    .group h3 {
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      color: #34495e;
    }
    .channel {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      margin-top: 5px;
      background: #ecf0f1;
      border-radius: 6px;
    }
    .channel input {
      flex: 1;
      margin-right: 10px;
    }
    .channel-actions button {
      margin-left: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üåê M3U Kanal D√ºzenleyici</h1>
    <div class="toolbar">
      <input type="text" id="search" placeholder="Kanal ara...">
      <input type="text" id="newGroupName" placeholder="Yeni grup adƒ±">
      <button onclick="addGroup()">+ Grup Ekle</button>
    </div>

    <div class="toolbar">
      <select id="groupSelector"></select>
      <input type="text" id="newChannelName" placeholder="Kanal Adƒ±">
      <input type="text" id="newChannelUrl" placeholder="M3U Adresi">
      <button onclick="addChannel()">Kanal Ekle</button>
    </div>

    <div id="playlist"></div>
  </div>

  <script>
    const playlistData = {};

    function render() {
      const playlist = document.getElementById("playlist");
      const groupSelector = document.getElementById("groupSelector");
      const search = document.getElementById("search").value.toLowerCase();

      playlist.innerHTML = "";
      groupSelector.innerHTML = "";
      for (const group in playlistData) {
        if (!playlistData[group].length) continue;
        groupSelector.innerHTML += `<option value="${group}">${group}</option>`;
        const groupDiv = document.createElement("div");
        groupDiv.className = "group";
        const header = document.createElement("h3");
        header.textContent = group;
        groupDiv.appendChild(header);

        playlistData[group].forEach((ch, idx) => {
          if (
            ch.name.toLowerCase().includes(search) ||
            ch.url.toLowerCase().includes(search)
          ) {
            const chDiv = document.createElement("div");
            chDiv.className = "channel";

            chDiv.innerHTML = `
              <input value="${ch.name}" onchange="updateChannel('${group}', ${idx}, 'name', this.value)" />
              <input value="${ch.url}" onchange="updateChannel('${group}', ${idx}, 'url', this.value)" />
              <div class="channel-actions">
                <button onclick="removeChannel('${group}', ${idx})">Sil</button>
              </div>
            `;

            groupDiv.appendChild(chDiv);
          }
        });

        playlist.appendChild(groupDiv);
      }
    }

    function addGroup() {
      const name = document.getElementById("newGroupName").value.trim();
      if (!name || playlistData[name]) return alert("Ge√ßerli bir grup adƒ± girin!");
      playlistData[name] = [];
      render();
    }

    function addChannel() {
      const group = document.getElementById("groupSelector").value;
      const name = document.getElementById("newChannelName").value.trim();
      const url = document.getElementById("newChannelUrl").value.trim();
      if (!group || !name || !url) return alert("T√ºm alanlar dolu olmalƒ±!");
      playlistData[group].push({ name, url });
      render();
    }

    function removeChannel(group, idx) {
      playlistData[group].splice(idx, 1);
      render();
    }

    function updateChannel(group, idx, field, value) {
      playlistData[group][idx][field] = value;
    }

    // Demo veri:
    playlistData["Ulusal"] = [
      { name: "TRT 1", url: "http://example.com/trt1.m3u8" },
      { name: "atv", url: "http://example.com/atv.m3u8" },
    ];
    playlistData["Spor"] = [
      { name: "S Sports", url: "http://example.com/ssports.m3u8" },
    ];
    render();
  </script>
</body>
</html>
